{% extends 'base.html' %}

{% block content %}
<a href="{% url 'passageiro:initial' user.id %}">< Voltar</a>
<h2>Busca de corridas</h2>
<form action="{% url 'passageiro:search' user.id %}" method="get">
    <p>
        <label for="id_query">Dia:</label>
        <input type="date" name="query" id="id_query" min="{% now "Y-m-d" %}" />
    </p>
    <button type="submit">Buscar</button>
</form>



<h2>Resultado da busca</h2>
{% if corrida_list %}
<section>
    {% for corrida in corrida_list %}
    <article>
        <p>{{ corrida.id }}: {{ corrida.dia }} ({{ corrida.vagas }})</p>
        <a href="{% url 'passageiro:detail' user.id corrida.id %}">Ver detalhes</a>
        <form method="post" action="{% url 'passageiro:request' user.id corrida.id%}">
            {% csrf_token %}
            <button
            {% if corrida.exists %}disabled{% endif %}
            {% if not corrida.exists %}type="submit"{% endif %}>
            {{corrida.title}}
            </button>
        </form>
    </article>
    {% endfor %}
</section>
{% else %}
    <p>NÃ£o foi encontrada nenhuma corrida para a busca.</p>
{% endif %}

{% endblock content %}