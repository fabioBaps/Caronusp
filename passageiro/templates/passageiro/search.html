{% extends 'base.html' %}

{% block content %}
<a href="{% url 'passageiro:initial' user.id %}">< Voltar</a>
<h2>Busca de corridas</h2>
<form action="{% url 'passageiro:search' user.id %}" method="post">
    {% csrf_token %}
    <p>
        <label for="id_dia">Dia:</label>
        <input type="date" name="dia" id="id_dia" min="{% now "Y-m-d" %}" />
    </p>
    <p>
        <label for="id_local_partida">Local de partida:</label>
        <input type="text" name="local_partida" id="id_local_partida" />
    </p>
    <p>
        <label for="id_local_chegada">Local de chegada:</label>
        <input type="text" name="local_chegada" id="id_local_chegada" />
    </p>
    <button type="submit">Buscar</button>
</form>



<h2>Resultado da busca</h2>
{% if corrida_list %}
<section>
    {% for corrida in corrida_list %}
    <article>
        <p>{{ corrida.id }}: {{ corrida.dia }} {{ corrida.carona.local_partida }} para {{ corrida.carona.local_chegada }} ({{ corrida.vagas }})</p>
        <form method="post" action="{% url 'passageiro:request' user.id corrida.id%}">
            {% csrf_token %}
            <button
            {% if corrida.exists %}disabled{% endif %}
            {% if not corrida.exists %}type="submit"{% endif %}>
            {{corrida.title}}
            </button>
        </form>
    </article>
    {% endfor %}
</section>
{% else %}
    <p>NÃ£o foi encontrada nenhuma corrida para a busca.</p>
{% endif %}

{% endblock content %}